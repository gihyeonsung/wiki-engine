---
layout: base
---
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
<link rel="stylesheet" type="text/css"
  href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">

<div id="search-searchbar"></div>
<ul id="search-hits"></ul>

<script>
  const search = instantsearch({
    appId: '{{ site.algolia.application_id }}',
    indexName: '{{ site.algolia.index_name }}',
    apiKey: '{{ site.algolia.search_only_api_key }}'
  });

  search.addWidget(
    instantsearch.widgets.searchBox({
      container: '#search-searchbar',
      poweredBy: true,
      reset: false,
      magnifier: false
    })
  );
  search.addWidget(
    instantsearch.widgets.hits({
      container: '#search-hits',
      templates: {
        item: function (hit) {
          if (!hit.title) {
            return
          }

          let date = ''
          if (hit.updated) {
            date = hit.updated.split(' ')[0].split('-').join('.') + ' - '
          } else if (hit.date) {
            date = moment.unix(hit.date).format('YYYY.MM.DD') + ' - '
          }

          return `<li>${date}<a href="${hit.url}">${hit.title}</a></li>`
        }
      }
    })
  );

  search.start();
</script>
